<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>跳转链接生成器（支持 scheme ）</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:0 auto;max-width:720px;padding:24px;line-height:1.6}
  h2{margin:0 0 12px}
  input,button{font-size:16px;padding:12px;border-radius:10px;border:1px solid #ddd;width:100%;box-sizing:border-box}
  button{border:none;background:#4caf50;color:#fff;cursor:pointer}
  button.secondary{background:#2196f3}
  .row{display:flex;gap:10px;margin-top:10px}
  code{display:block;background:#f6f8fa;padding:12px;border-radius:10px;word-break:break-all;margin-top:8px}
  small{color:#666}
</style>
</head>
<body>
  <h2>GitHub Pages 跳转链接生成器</h2>
  <p>可输入：<b>长网址</b>、<b>完整短链接</b>、或<b>自定义 scheme</b>（如 <code>alipays://</code>、<code>myapp://</code>）。</p>
  <input id="inputUrl" placeholder="例如：https://zzmm.xx.kg/bp56q4 或 alipays://platformapi/startapp?appId=..." />

  <div class="row">
    <button id="genBtn">生成跳转链接</button>
    <button id="clearBtn" class="secondary" type="button">清空</button>
  </div>

  <div id="out" style="display:none">
    <p>生成结果（前缀固定为你的仓库域名）：</p>
    <code id="finalLink"></code>
    <div class="row">
      <button id="copyBtn">一键复制</button>
      <a id="testA" target="_blank" style="text-decoration:none"><button class="secondary" type="button">新窗口测试</button></a>
    </div>
    <p><small>链接形如：<code>https://scy99527.github.io/redirect.html?t=...</code></small></p>
  </div>

<script>
const inp   = document.getElementById('inputUrl');
const out   = document.getElementById('out');
const final = document.getElementById('finalLink');
const testA = document.getElementById('testA');
const copyB = document.getElementById('copyBtn');

document.getElementById('genBtn').onclick = () => {
  const raw = (inp.value || '').trim();
  if(!raw){ alert('请先输入一个链接或 scheme'); return; }
  const base = 'https://scy99527.github.io/redirect.html';
  const url  = `${base}?t=${encodeURIComponent(raw)}`;
  final.textContent = url;
  testA.href = url;
  out.style.display = 'block';
};

copyB.onclick = async () => {
  try { await navigator.clipboard.writeText(final.textContent); copyB.textContent = '已复制'; setTimeout(()=>copyB.textContent='一键复制',1200); }
  catch { alert('复制失败，请手动复制'); }
};

document.getElementById('clearBtn').onclick = () => {
  inp.value = '';
  out.style.display = 'none';
  final.textContent = '';
};
</script>
</body>
</html>
