<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>跳转提示</title>
<style>
body {
    font-family: "Segoe UI", sans-serif;
    margin:0; padding:0;
    height:100vh; width:100vw; position:relative;
    overflow:hidden;
    /* 动态彩虹渐变背景 */
    background: linear-gradient(270deg, #ff9a9e, #fad0c4, #a1c4fd, #c2e9fb, #d4fc79, #96e6a1);
    background-size: 1200% 1200%;
    animation: gradientBG 60s ease infinite;
}
@keyframes gradientBG {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

#guider {
    position: fixed; top:12px; right:12px;
    display:flex; flex-direction:column; align-items:flex-end; z-index:100;
}
.triangle {
    width:20px; height:20px;
    background:#3AB2A7;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    animation: bounce 1s infinite alternate;
    margin-bottom:6px;
    transform: translateX(-2px);
}
@keyframes bounce {0%{transform: translateY(0) translateX(-2px);} 100%{transform: translateY(-6px) translateX(-2px);}}
.tips {
    background:#3AB2A7;
    color:white;
    font-size:0.8em;
    padding:6px 10px;
    border-radius:10px;
    text-align:center;
    line-height:1.2;
}

.container {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    background: rgba(255,255,255,0.85);
    padding:30px; border-radius:20px; box-shadow:0 15px 30px rgba(0,0,0,0.15); 
    max-width:400px; width:90%; text-align:center;
    backdrop-filter: blur(10px);
    animation: popIn 0.6s ease;
}
@keyframes popIn {0%{transform:translate(-50%,-50%) scale(0.9); opacity:0;} 100%{transform:translate(-50%,-50%) scale(1); opacity:1;}}

h2 { margin:0 0 12px; color:#333; font-size:1.6em;}
p { color:#555; line-height:1.5; margin-bottom:16px;}

/* 动态渐变彩虹logo */
#logo {
    width:80px; height:80px;
    margin:12px auto;
    border-radius:16px;
    background: linear-gradient(45deg, #ff9a9e, #fad0c4, #a1c4fd, #c2e9fb, #d4fc79, #96e6a1);
    background-size: 600% 600%;
    animation: logoGradient 20s ease infinite;
    box-shadow:0 8px 15px rgba(0,0,0,0.1);
}
@keyframes logoGradient {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

/* 二维码缩小 */
#qrcode img { margin-top:12px; width:150px; height:150px; border-radius:12px; }

/* 复制按钮 */
button.copyBtn {
    padding:12px 20px; border-radius:12px; border:none; font-size:16px; cursor:pointer;
    background: linear-gradient(90deg,#36D1DC,#5B86E5); color:white; transition:0.2s all;
    margin-bottom:8px;
}
button.copyBtn:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.2); }
button.copyBtn:active { transform:translateY(0) scale(0.97); box-shadow:0 2px 8px rgba(0,0,0,0.2); }
code { background:#f0f4f8; padding:4px 8px; border-radius:8px; display:inline-block; word-break:break-all; font-size:0.9em;}
</style>
</head>
<body>
<div id="guider">
    <div class="triangle"></div>
    <div class="tips">点击右上角<br/>选择“浏览器中打开”</div>
</div>

<div class="container" id="mainContainer">
    <div id="logo"></div>
    <h2>微信/QQ 内无法直接打开</h2>
    <p>复制链接后请在浏览器中打开</p>
    <div id="panel">
        <p><code id="urlBox"></code></p>
        <button class="copyBtn" id="copyBtn">一键复制链接</button>
        <div id="qrcode"></div>
    </div>
</div>

<script>
// 微信/QQ 检测
function isWeChat(){return /MicroMessenger/i.test(navigator.userAgent);}
function isQQ(){return /QQ/i.test(navigator.userAgent);}

// 获取目标链接
function getQueryParam(name){return new URLSearchParams(window.location.search).get(name);}
const target = getQueryParam('t') ? decodeURIComponent(getQueryParam('t')) : null;

const urlBox = document.getElementById('urlBox');
const copyBtn = document.getElementById('copyBtn');
const qrcode = document.getElementById('qrcode');
const mainContainer = document.getElementById('mainContainer');

if(target){
    if(isWeChat() || isQQ()){
        // 微信/QQ内显示提示UI
        urlBox.textContent = target;
        qrcode.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(target)}" alt="QR Code">`;
        copyBtn.onclick = async ()=>{
            try{ await navigator.clipboard.writeText(target); alert('已复制到剪贴板，请在浏览器粘贴打开'); }
            catch{ alert('复制失败，请手动复制'); }
        };
    } else {
        // 浏览器直接跳转
        window.location.href = target;
        mainContainer.style.display='none'; 
    }
}else{
    urlBox.textContent = '未指定目标链接';
}
</script>
</body>
</html>
